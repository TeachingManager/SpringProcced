프로토타입 스코프
요청시마다 새로운 빈 생성 + DI > 반환 후 관리x

싱글톤 빈과 프로토타입 스코프를 함께 사용시 문제

주입 시점에만 새로 프로토타입 빈이 생성됨
싱글톤 빈은 생성시점에만 의존관계 주입 
->프로토타입 빈이 새로 생성되기는 하지만, 싱글톤 빈과 함께 계속 유지

ObjectProvider
실행해보면 prototypeBeanProvider.getObject() 을 통해서 항상 새로운 프로토타입 빈이 생성
내부에서는 스프링 컨테이너를 통해 해당 빈을 찾아서 반환한다. (DL)

JSR-330 Provider
jakarta.inject:jakarta.inject-api:2.0.1 gradle에 추가

request 스코프
request가 없어 오류 발생 > 프로바이더 사용

프록시 방식 - proxyMode = ScopedProxyMode.TARGET_CLASS
가짜 프록시 클래스를 만들어 미리 다른 빈에 주입해 둘수 있음
가짜 프록시 객체를 스프링 컨테이너에 등록
내부에는 진짜를 찾는 방법이 있음

request 스코프를 처리하는 핵심 아이디어는 진짜 객체 조회를 꼭 필요한 시점까지 지연처리
유지보수가 어려워 꼭 필요한 곳에만 최소화해서 사용